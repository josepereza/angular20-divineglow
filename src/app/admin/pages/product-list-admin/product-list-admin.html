<div class="container botones">

  <!-- BOT√ìN AGREGAR -->
  <button class="btn btn-info mb-3" (click)="openAddModal()">
    ‚ûï Produkt hinzuf√ºgen
  </button>

  <!-- BOT√ìN LOGOUT -->
  <button class="btn btn-danger mb-3 ms-3" (click)="logout()">
    üîí Abmelden
  </button>
  <br>

</div>
<div class="container mt-4">

  <!-- LISTADO DE PRODUCTOS -->
<div class="row row-cols-1 row-cols-md-3 g-4">
    @for(product of products(); track product.id) {
      <div class="col">
        <div class="card bg-dark text-white shadow border-secondary h-100">

          <img [src]="product.imageUrl" class="card-img-top"
               style="height: 180px; object-fit: cover;" />

          <div class="card-body d-flex flex-column">
            <h5 class="text-info">{{ product.name }}</h5>
            <p class="text-warning small">Lagerbestand: {{ product.stock }}</p>
            <p class="small">{{ product.description }}</p>
            <p class="fw-bold text-success mt-auto">‚Ç¨ {{ product.price }}</p>

            <div class="gap-2 d-flex mt-3">
              <button class="btn btn-warning btn-sm w-50"
                      (click)="openEditModal(product)">Bearbeiten</button>
              <button class="btn btn-danger btn-sm w-50"
                      (click)="deleteProduct(product.id)">L√∂schen</button>
            </div>

          </div>
        </div>
      </div>
    }
  </div>
</div>

<!-- MODAL FORMULARIO -->
<div class="modal fade show"
     tabindex="-1"
     style="display: block;"
     *ngIf="showModal()">
  <div class="modal-dialog">
    <div class="modal-content bg-dark text-white">

      <div class="modal-header">
        <h5 class="modal-title text-info">
          {{ editMode() ? '‚úèÔ∏è Produkt bearbeiten' : 'üÜï Neues Produkt hinzuf√ºgen' }}
        </h5>
        <button type="button" class="btn-close btn-close-white"
                (click)="closeModal()"></button>
      </div>

      <div class="modal-body">
        <form [formGroup]="form" class="row g-3">

          <input type="hidden" formControlName="id" />

          <div class="col-12">
            <label class="form-label">Name</label>
            <input formControlName="name"
                   class="form-control bg-secondary text-white" />
          </div>

          <div class="col-12">
            <label class="form-label">Beschreibung</label>
            <textarea formControlName="description"
                      rows="2"
                      class="form-control bg-secondary text-white"></textarea>
          </div>

          <div class="col-md-6">
            <label class="form-label">Preis</label>
            <input type="number"
                   formControlName="price"
                   class="form-control bg-secondary text-white" />
          </div>

          <div class="col-md-6">
            <label class="form-label">Lagerbestand</label>
            <input type="number"
                   formControlName="stock"
                   class="form-control bg-secondary text-white" />
          </div>

          <div class="col-12">
            <label class="form-label">Bild</label>
            <input type="file"
                   class="form-control bg-secondary text-white"
                   (change)="onFileChange($event)" />
          </div>

        </form>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="closeModal()">Abbrechen</button>
        <button class="btn btn-info" (click)="saveProduct()">Speichern</button>
      </div>

    </div>
  </div>
</div>
